<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central Radmin VPN - Painel de Controle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #0a0e1a; color: #e2e8f0; overflow: hidden; height: 100vh; }
        #app { display: flex; height: 100vh; width: 100vw; }
        .sidebar { width: 260px; min-width: 260px; background: #0f1322; border-right: 1px solid rgba(255,255,255,0.06); display: flex; flex-direction: column; height: 100vh; transition: all 0.3s; }
        .sidebar.collapsed { width: 68px; min-width: 68px; }
        .sidebar-header { padding: 20px 16px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid rgba(255,255,255,0.06); }
        .sidebar-logo { width: 40px; height: 40px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 14px; color: white; flex-shrink: 0; }
        .sidebar-brand { display: flex; flex-direction: column; }
        .sidebar-brand-name { font-size: 14px; font-weight: 700; color: #f1f5f9; white-space: nowrap; }
        .sidebar-brand-sub { font-size: 10px; color: #64748b; white-space: nowrap; }
        .sidebar.collapsed .sidebar-brand, .sidebar.collapsed .nav-label, .sidebar.collapsed .nav-item-text, .sidebar.collapsed .connection-section, .sidebar.collapsed .sidebar-footer-text, .sidebar.collapsed .nav-badge { display: none; }
        .sidebar-nav { flex: 1; padding: 12px 8px; overflow-y: auto; }
        .nav-section { margin-bottom: 8px; }
        .nav-label { font-size: 10px; font-weight: 600; color: #475569; text-transform: uppercase; letter-spacing: 0.05em; padding: 8px 12px 6px; }
        .nav-item { display: flex; align-items: center; gap: 10px; padding: 9px 12px; border-radius: 8px; cursor: pointer; transition: all 0.15s; color: #94a3b8; font-size: 13px; font-weight: 500; position: relative; user-select: none; }
        .nav-item:hover { background: rgba(255,255,255,0.04); color: #cbd5e1; }
        .nav-item.active { background: rgba(99,102,241,0.12); color: #818cf8; }
        .nav-item.active::before { content: ''; position: absolute; left: -8px; top: 50%; transform: translateY(-50%); width: 3px; height: 20px; background: #6366f1; border-radius: 0 3px 3px 0; }
        .nav-icon { width: 18px; height: 18px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
        .nav-icon svg { width: 18px; height: 18px; }
        .nav-badge { margin-left: auto; background: #6366f1; color: white; font-size: 10px; font-weight: 600; padding: 2px 7px; border-radius: 10px; min-width: 22px; text-align: center; }
        .connection-section { padding: 12px; border-top: 1px solid rgba(255,255,255,0.06); }
        .connection-status { display: flex; align-items: center; gap: 8px; padding: 10px 12px; background: rgba(255,255,255,0.03); border-radius: 8px; margin-bottom: 8px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
        .status-dot.online { background: #22c55e; box-shadow: 0 0 8px rgba(34,197,94,0.5); animation: pulse 2s infinite; }
        .status-dot.offline { background: #ef4444; box-shadow: 0 0 8px rgba(239,68,68,0.5); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        .status-text { font-size: 12px; color: #94a3b8; }
        .status-text strong { color: #e2e8f0; }
        .relay-input-group { display: flex; gap: 6px; }
        .relay-input { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 6px; padding: 7px 10px; font-size: 11px; color: #e2e8f0; font-family: 'Inter', sans-serif; outline: none; transition: border-color 0.2s; }
        .relay-input:focus { border-color: #6366f1; }
        .relay-btn { background: #6366f1; color: white; border: none; border-radius: 6px; padding: 7px 12px; font-size: 11px; font-weight: 600; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; white-space: nowrap; }
        .relay-btn:hover { background: #5558e6; transform: translateY(-1px); }
        .sidebar-footer { padding: 12px; border-top: 1px solid rgba(255,255,255,0.06); }
        .sidebar-toggle { display: flex; align-items: center; gap: 10px; padding: 8px 12px; border-radius: 8px; cursor: pointer; color: #64748b; font-size: 12px; transition: all 0.15s; background: none; border: none; width: 100%; font-family: 'Inter', sans-serif; }
        .sidebar-toggle:hover { background: rgba(255,255,255,0.04); color: #94a3b8; }
        .sidebar-toggle svg { width: 16px; height: 16px; }
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; background: #0a0e1a; }
        .topbar { height: 56px; border-bottom: 1px solid rgba(255,255,255,0.06); display: flex; align-items: center; justify-content: space-between; padding: 0 24px; background: rgba(15,19,34,0.8); backdrop-filter: blur(10px); flex-shrink: 0; }
        .topbar-title { font-size: 16px; font-weight: 700; color: #f1f5f9; display: flex; align-items: center; gap: 8px; }
        .topbar-right { display: flex; align-items: center; gap: 8px; }
        .topbar-status { display: flex; align-items: center; gap: 6px; padding: 4px 10px; background: rgba(255,255,255,0.03); border-radius: 6px; font-size: 11px; color: #94a3b8; }
        .topbar-uptime { font-size: 11px; color: #475569; }
        .page-content { flex: 1; overflow-y: auto; padding: 24px; scroll-behavior: smooth; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 14px; margin-bottom: 24px; }
        .stat-card { background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 18px; transition: all 0.25s; }
        .stat-card:hover { border-color: rgba(99,102,241,0.3); transform: translateY(-2px); box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .stat-label { font-size: 11px; color: #64748b; font-weight: 500; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.03em; }
        .stat-value { font-size: 26px; font-weight: 800; color: #f1f5f9; }
        .stat-value.green { color: #22c55e; }
        .stat-value.purple { color: #818cf8; }
        .stat-value.yellow { color: #f59e0b; }
        .servers-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 16px; margin-top: 16px; }
        .server-card { background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 14px; overflow: hidden; cursor: pointer; transition: all 0.25s; }
        .server-card:hover { border-color: rgba(99,102,241,0.4); transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.3); }
        .server-card-header { padding: 18px 20px 14px; display: flex; justify-content: space-between; align-items: flex-start; }
        .server-card-info { flex: 1; min-width: 0; }
        .server-card-info h3 { font-size: 14px; font-weight: 700; color: #f1f5f9; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .server-motd { font-size: 12px; color: #6366f1; font-weight: 500; }
        .server-status-badge { padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 600; flex-shrink: 0; margin-left: 8px; }
        .server-status-badge.online { background: rgba(34,197,94,0.15); color: #22c55e; }
        .server-status-badge.offline { background: rgba(239,68,68,0.15); color: #ef4444; }
        .server-card-body { padding: 0 20px 14px; }
        .server-detail-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; font-size: 12px; color: #94a3b8; }
        .server-detail-row .detail-icon { width: 14px; height: 14px; flex-shrink: 0; display: flex; align-items: center; }
        .server-detail-row .detail-icon svg { width: 14px; height: 14px; color: #64748b; }
        .server-card-footer { border-top: 1px solid rgba(255,255,255,0.06); display: flex; }
        .server-card-action { flex: 1; padding: 12px; display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 12px; font-weight: 500; color: #64748b; cursor: pointer; transition: all 0.15s; background: none; border: none; font-family: 'Inter', sans-serif; }
        .server-card-action:hover { background: rgba(255,255,255,0.03); color: #94a3b8; }
        .server-card-action + .server-card-action { border-left: 1px solid rgba(255,255,255,0.06); }
        .server-card-action svg { width: 14px; height: 14px; }
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 1000; animation: fadeIn 0.2s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal { background: #111827; border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; width: 90%; max-width: 800px; max-height: 85vh; display: flex; flex-direction: column; animation: slideUp 0.3s; overflow: hidden; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-header { padding: 20px 24px; border-bottom: 1px solid rgba(255,255,255,0.06); display: flex; justify-content: space-between; align-items: center; }
        .modal-header h2 { font-size: 18px; font-weight: 700; }
        .modal-close { width: 32px; height: 32px; border-radius: 8px; background: rgba(255,255,255,0.05); border: none; color: #94a3b8; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.15s; }
        .modal-close:hover { background: rgba(255,255,255,0.1); color: #e2e8f0; }
        .modal-body { padding: 24px; overflow-y: auto; flex: 1; }
        .modal-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
        .modal-info-item { background: rgba(255,255,255,0.03); border-radius: 10px; padding: 14px 16px; }
        .modal-info-item label { font-size: 11px; color: #64748b; font-weight: 500; text-transform: uppercase; letter-spacing: 0.03em; display: block; margin-bottom: 4px; }
        .modal-info-item span { font-size: 14px; font-weight: 600; color: #e2e8f0; }
        .modal-section-title { font-size: 14px; font-weight: 600; color: #94a3b8; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .modal-section-title svg { width: 16px; height: 16px; }
        .players-list { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 24px; }
        .player-tag { background: rgba(99,102,241,0.1); color: #818cf8; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 6px; }
        .player-tag img { width: 16px; height: 16px; border-radius: 2px; }
        .modal-chat { background: rgba(0,0,0,0.2); border-radius: 10px; height: 200px; overflow-y: auto; padding: 12px; }
        .modal-chat-msg { margin-bottom: 6px; font-size: 12px; line-height: 1.5; }
        .modal-chat-msg .chat-time { color: #475569; margin-right: 6px; }
        .modal-chat-msg .chat-user { color: #6366f1; font-weight: 600; margin-right: 4px; }
        .modal-chat-msg .chat-text { color: #cbd5e1; }
        .modal-actions { display: flex; gap: 8px; margin-top: 16px; }
        .chat-container { display: flex; flex-direction: column; height: 100%; }
        .chat-toolbar { display: flex; gap: 10px; margin-bottom: 16px; flex-wrap: wrap; align-items: center; }
        .chat-search { flex: 1; min-width: 200px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 9px 14px 9px 36px; font-size: 13px; color: #e2e8f0; font-family: 'Inter', sans-serif; outline: none; transition: border-color 0.2s; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: 12px center; }
        .chat-search:focus { border-color: #6366f1; }
        .filter-select { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 9px 14px; font-size: 13px; color: #e2e8f0; font-family: 'Inter', sans-serif; outline: none; cursor: pointer; min-width: 180px; appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: calc(100% - 12px) center; padding-right: 32px; }
        .filter-select option { background: #1e293b; color: #e2e8f0; }
        .export-btn { display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 9px 16px; font-size: 13px; color: #94a3b8; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.15s; font-weight: 500; }
        .export-btn:hover { background: rgba(255,255,255,0.08); color: #e2e8f0; }
        .export-btn svg { width: 15px; height: 15px; }
        .chat-messages { flex: 1; background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; overflow-y: auto; padding: 4px; }
        .chat-msg-item { display: flex; align-items: flex-start; gap: 12px; padding: 10px 14px; border-radius: 8px; transition: background 0.1s; }
        .chat-msg-item:hover { background: rgba(255,255,255,0.02); }
        .chat-msg-avatar { width: 32px; height: 32px; border-radius: 8px; background: rgba(99,102,241,0.15); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 12px; font-weight: 700; color: #818cf8; overflow: hidden; }
        .chat-msg-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .chat-msg-content { flex: 1; min-width: 0; }
        .chat-msg-header { display: flex; align-items: center; gap: 8px; margin-bottom: 2px; flex-wrap: wrap; }
        .chat-msg-user { font-size: 13px; font-weight: 600; color: #e2e8f0; }
        .chat-msg-server-tag { font-size: 10px; padding: 1px 7px; border-radius: 4px; background: rgba(99,102,241,0.1); color: #818cf8; font-weight: 500; }
        .chat-msg-time { font-size: 11px; color: #475569; margin-left: auto; }
        .chat-msg-text { font-size: 13px; color: #94a3b8; line-height: 1.5; word-break: break-word; }
        .chat-empty { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; min-height: 300px; color: #475569; }
        .chat-empty svg { width: 48px; height: 48px; margin-bottom: 12px; opacity: 0.5; }
        .chat-empty p { font-size: 14px; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .section-title { font-size: 16px; font-weight: 700; color: #f1f5f9; }
        .section-actions { display: flex; gap: 8px; }
        .bots-list { background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; overflow: hidden; margin-bottom: 24px; }
        .bot-item { display: flex; align-items: center; padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,0.04); gap: 12px; transition: background 0.15s; }
        .bot-item:last-child { border-bottom: none; }
        .bot-item:hover { background: rgba(255,255,255,0.02); }
        .bot-icon { width: 36px; height: 36px; border-radius: 8px; background: rgba(34,197,94,0.1); display: flex; align-items: center; justify-content: center; }
        .bot-icon svg { width: 18px; height: 18px; color: #22c55e; }
        .bot-info { flex: 1; min-width: 0; }
        .bot-name { font-size: 13px; font-weight: 600; color: #e2e8f0; }
        .bot-server { font-size: 11px; color: #64748b; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .bot-motd { font-size: 10px; color: #818cf8; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .bot-status-indicator { width: 8px; height: 8px; border-radius: 50%; background: #22c55e; flex-shrink: 0; }
        .bots-empty { padding: 40px; text-align: center; color: #475569; font-size: 13px; }
        .dash-section { background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 20px; margin-bottom: 24px; }
        .dash-section h3 { font-size: 14px; font-weight: 700; margin-bottom: 14px; color: #f1f5f9; display: flex; align-items: center; gap: 8px; }
        .input-row { display: flex; gap: 8px; margin-bottom: 10px; }
        .input-field { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 9px 14px; font-size: 13px; color: #e2e8f0; font-family: 'Inter', sans-serif; outline: none; transition: border-color 0.2s; }
        .input-field:focus { border-color: #6366f1; }
        .btn-primary { background: #6366f1; color: white; border: none; border-radius: 8px; padding: 9px 18px; font-size: 13px; font-weight: 600; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; white-space: nowrap; }
        .btn-primary:hover { background: #5558e6; transform: translateY(-1px); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn-danger { background: rgba(239,68,68,0.15); color: #ef4444; border: none; border-radius: 8px; padding: 9px 18px; font-size: 13px; font-weight: 600; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; white-space: nowrap; }
        .btn-danger:hover { background: rgba(239,68,68,0.25); }
        .btn-secondary { background: rgba(255,255,255,0.05); color: #94a3b8; border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 9px 18px; font-size: 13px; font-weight: 600; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; white-space: nowrap; }
        .btn-secondary:hover { background: rgba(255,255,255,0.08); color: #e2e8f0; }
        .btn-warn { background: rgba(245,158,11,0.15); color: #f59e0b; border: none; border-radius: 8px; padding: 9px 18px; font-size: 13px; font-weight: 600; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; white-space: nowrap; }
        .btn-warn:hover { background: rgba(245,158,11,0.25); }
        .logs-container { background: #0a0e1a; border-radius: 8px; padding: 12px; max-height: 200px; overflow-y: auto; font-family: 'JetBrains Mono', 'Fira Code', monospace; font-size: 11px; line-height: 1.6; color: #64748b; }
        .log-entry { padding: 2px 0; }
        .log-entry .log-emoji { margin-right: 4px; }
        .log-entry .log-time { color: #475569; margin-right: 6px; }
        .log-entry.info { color: #38bdf8; }
        .log-entry.success { color: #22c55e; }
        .log-entry.error { color: #ef4444; }
        .log-entry.warn { color: #f59e0b; }
        .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; }
        .setting-group { background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 20px; }
        .setting-group h3 { font-size: 14px; font-weight: 700; margin-bottom: 16px; color: #f1f5f9; display: flex; align-items: center; gap: 8px; }
        .setting-group h3 svg { width: 16px; height: 16px; }
        .setting-row { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px; }
        .setting-row:last-child { margin-bottom: 0; }
        .setting-row label { font-size: 12px; color: #64748b; font-weight: 500; }
        .blacklist-items { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
        .blacklist-tag { background: rgba(239,68,68,0.1); color: #ef4444; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 6px; }
        .blacklist-tag button { background: none; border: none; color: #ef4444; cursor: pointer; font-size: 14px; line-height: 1; padding: 0; opacity: 0.6; }
        .blacklist-tag button:hover { opacity: 1; }
        .messages-list { margin-top: 10px; }
        .message-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: rgba(255,255,255,0.02); border-radius: 6px; margin-bottom: 4px; font-size: 13px; color: #94a3b8; }
        .message-item button { background: none; border: none; color: #ef4444; cursor: pointer; font-size: 14px; opacity: 0.6; flex-shrink: 0; }
        .message-item button:hover { opacity: 1; }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        @media (max-width: 1200px) { .dashboard-grid { grid-template-columns: 1fr; } }
        .dashboard-full { grid-column: 1 / -1; }
        .toast-container { position: fixed; top: 20px; right: 20px; z-index: 2000; display: flex; flex-direction: column; gap: 8px; pointer-events: none; }
        .toast { background: #1e293b; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 12px 20px; font-size: 13px; color: #e2e8f0; box-shadow: 0 8px 30px rgba(0,0,0,0.4); animation: toastIn 0.3s; min-width: 250px; pointer-events: auto; }
        @keyframes toastIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .mc-0{color:#000}.mc-1{color:#0000AA}.mc-2{color:#00AA00}.mc-3{color:#00AAAA}.mc-4{color:#AA0000}.mc-5{color:#AA00AA}.mc-6{color:#FFAA00}.mc-7{color:#AAA}.mc-8{color:#555}.mc-9{color:#55F}.mc-a{color:#5F5}.mc-b{color:#5FF}.mc-c{color:#F55}.mc-d{color:#F5F}.mc-e{color:#FF5}.mc-f{color:#FFF}
        .mc-l{font-weight:bold}.mc-o{font-style:italic}.mc-n{text-decoration:underline}.mc-m{text-decoration:line-through}
        .analytics-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px; }
        @media (max-width: 1000px) { .analytics-grid { grid-template-columns: 1fr; } }
        .chart-card { background: #111827; border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 20px; }
        .chart-card h3 { font-size: 14px; font-weight: 700; color: #f1f5f9; margin-bottom: 16px; }
        .chart-card canvas { max-height: 250px; }
        .analytics-stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-bottom: 16px; }
        .analytics-stat { background: rgba(255,255,255,0.03); border-radius: 10px; padding: 14px; text-align: center; }
        .analytics-stat .val { font-size: 24px; font-weight: 800; color: #818cf8; }
        .analytics-stat .lbl { font-size: 11px; color: #64748b; margin-top: 4px; }
        .top-server-row { display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.04); font-size: 12px; }
        .top-server-row:last-child { border-bottom: none; }
        .top-server-name { color: #e2e8f0; font-weight: 500; flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .top-server-val { color: #818cf8; font-weight: 700; margin-left: 12px; }
        .server-section-label { font-size: 13px; font-weight: 700; color: #94a3b8; margin: 20px 0 10px; padding-bottom: 6px; border-bottom: 1px solid rgba(255,255,255,0.06); display: flex; align-items: center; gap: 8px; }
        .server-section-label .dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
        .highlight { background: rgba(99,102,241,0.3); border-radius: 2px; padding: 0 1px; }
        .login-bg { position: fixed; inset: 0; background: #0a0e1a; display: flex; align-items: center; justify-content: center; z-index: 3000; }
        .login-card { background: #111827; border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; width: 90%; max-width: 400px; animation: slideUp 0.3s; overflow: hidden; }
        .login-card-header { padding: 30px 30px 0; text-align: center; }
        .login-card-body { padding: 24px 30px 30px; }
        .login-error { background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 10px 14px; font-size: 13px; color: #ef4444; margin-bottom: 12px; text-align: center; animation: shake 0.4s; }
        @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }
        .login-footer { display: flex; align-items: center; justify-content: center; gap: 6px; margin-top: 16px; font-size: 11px; color: #475569; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.15); }
        .no-data-placeholder { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px; color: #475569; text-align: center; }
        .no-data-placeholder svg { width: 48px; height: 48px; margin-bottom: 12px; opacity: 0.4; }
        .no-data-placeholder p { font-size: 14px; margin-bottom: 4px; }
        .no-data-placeholder span { font-size: 12px; color: #374151; }
    </style>
</head>
<body>
    <div id="app"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        // ===== MOTD PARSER =====
        function parseMotd(motd) {
            if (!motd) return [{ text: '', classes: [] }];
            if (typeof motd === 'object') {
                if (motd.text !== undefined) {
                    let parts = parseMotdString(String(motd.text || ''));
                    if (motd.extra) motd.extra.forEach(e => { parts = parts.concat(parseMotd(e)); });
                    return parts;
                }
                if (motd.translate) return parseMotdString(motd.translate);
                return parseMotdString(JSON.stringify(motd));
            }
            return parseMotdString(String(motd));
        }

        function parseMotdString(str) {
            const parts = []; let current = { text: '', classes: [] }; let i = 0;
            while (i < str.length) {
                if (str[i] === '¬ß' && i + 1 < str.length) {
                    if (current.text) parts.push({ ...current });
                    const code = str[i + 1].toLowerCase();
                    if (code === 'r') current = { text: '', classes: [] };
                    else if ('0123456789abcdef'.includes(code)) current = { text: '', classes: ['mc-' + code] };
                    else if ('lmnok'.includes(code)) current = { text: '', classes: [...current.classes, 'mc-' + code] };
                    else current = { text: '', classes: [...current.classes] };
                    i += 2;
                } else { current.text += str[i]; i++; }
            }
            if (current.text) parts.push(current);
            return parts;
        }

        function MotdText({ motd }) {
            const parts = parseMotd(motd);
            if (!parts.length || (parts.length === 1 && !parts[0].text)) return <span style={{color:'#64748b'}}>Sem MOTD</span>;
            return <span>{parts.map((p, i) => <span key={i} className={p.classes.join(' ')}>{p.text}</span>)}</span>;
        }

        // ===== ICONS =====
        const I = {
            Dashboard: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>,
            Server: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/><circle cx="6" cy="6" r="1"/><circle cx="6" cy="18" r="1"/></svg>,
            Chat: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
            Settings: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>,
            Analytics: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>,
            Bot: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="12" cy="5" r="2"/><path d="M12 7v4"/><line x1="8" y1="16" x2="8" y2="16"/><line x1="16" y1="16" x2="16" y2="16"/></svg>,
            Users: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            Eye: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>,
            Download: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>,
            ChevronLeft: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="15 18 9 12 15 6"/></svg>,
            ChevronRight: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>,
            Globe: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            Shield: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
            Gamepad: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="6" y1="12" x2="10" y2="12"/><line x1="8" y1="10" x2="8" y2="14"/><line x1="15" y1="13" x2="15.01" y2="13"/><line x1="18" y1="11" x2="18.01" y2="11"/><rect x="2" y="6" width="20" height="12" rx="2"/></svg>,
            Plug: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2v6"/><path d="M6 8h12"/><path d="M8 8v4a4 4 0 0 0 8 0V8"/><path d="M12 16v6"/></svg>,
            MsgEmpty: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/><line x1="9" y1="10" x2="15" y2="10"/></svg>,
            Clock: () => <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
        };

        // ===== SERVER POPUP =====
        function ServerPopup({ server, onClose, chatMessages, socket }) {
            const serverChat = useMemo(() =>
                (chatMessages || []).filter(m => m.serverKey === server.key).slice(-30),
                [chatMessages, server.key]
            );
            const chatEndRef = useRef(null);
            useEffect(() => { if(chatEndRef.current) chatEndRef.current.scrollTop = chatEndRef.current.scrollHeight; }, [serverChat]);

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal" onClick={e => e.stopPropagation()}>
                        <div className="modal-header">
                            <h2><MotdText motd={server.motd} /></h2>
                            <button className="modal-close" onClick={onClose}>√ó</button>
                        </div>
                        <div className="modal-body">
                            <div className="modal-info-grid">
                                <div className="modal-info-item"><label>IP</label><span>{server.key}</span></div>
                                <div className="modal-info-item"><label>Vers√£o</label><span>{server.version || '?'}</span></div>
                                <div className="modal-info-item"><label>Jogadores</label><span>{(server.players||[]).length}/{server.maxPlayers||'?'}</span></div>
                                <div className="modal-info-item"><label>Status</label><span style={{color: server.status==='online'?'#22c55e':'#ef4444'}}>{server.status==='online'?'‚óè Online':'‚óè Offline'}</span></div>
                                <div className="modal-info-item" style={{gridColumn:'1/-1'}}><label>MOTD</label><span><MotdText motd={server.motd}/></span></div>
                            </div>
                            <div className="modal-section-title"><I.Users/> Jogadores ({(server.players||[]).length})</div>
                            <div className="players-list">
                                {(server.players||[]).length > 0 ? (server.players||[]).map((p,i) => {
                                    const name = typeof p==='string'?p:p.username||p.name||'?';
                                    return (
                                        <span key={i} className="player-tag">
                                            <img src={`https://mc-heads.net/avatar/${encodeURIComponent(name)}/16`} alt="" onError={e=>{e.target.style.display='none'}}/>
                                            {name}
                                        </span>
                                    );
                                }) : <span style={{color:'#475569',fontSize:13}}>Nenhum jogador</span>}
                            </div>
                            <div className="modal-section-title"><I.Chat/> Chat</div>
                            <div className="modal-chat" ref={chatEndRef}>
                                {serverChat.length>0 ? serverChat.map((msg,i) => (
                                    <div key={i} className="modal-chat-msg">
                                        <span className="chat-time">[{new Date(msg.timestamp).toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'})}]</span>
                                        <span className="chat-user">{msg.username}:</span>
                                        <span className="chat-text">{msg.message}</span>
                                    </div>
                                )) : <div style={{color:'#475569',textAlign:'center',padding:20,fontSize:13}}>Sem mensagens</div>}
                            </div>
                            <div className="modal-actions">
                                <button className="btn-primary" onClick={() => {if(socket) socket.emit('connect_server',server.key); onClose();}}>Conectar Bot</button>
                                <button className="btn-danger" onClick={() => {if(socket) socket.emit('disconnect_server',server.key); onClose();}}>Desconectar</button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ===== LOG ENTRY =====
        function LogEntry({ log }) {
            if (typeof log === 'string') return <div className="log-entry">{log}</div>;
            const emoji = log.emoji || '';
            const time = log.time || '';
            const msg = log.msg || log.text || log.message || JSON.stringify(log);
            let cls = 'info';
            if (/[‚úÖüì£]/.test(emoji)) cls = 'success';
            else if (/[‚ùåüö´‚õî]/.test(emoji)) cls = 'error';
            else if (/[‚ö†üîåüîÑ]/.test(emoji)) cls = 'warn';
            return <div className={`log-entry ${cls}`}><span className="log-time">[{time}]</span> <span className="log-emoji">{emoji}</span> {msg}</div>;
        }

        // ===== DASHBOARD =====
        const DashboardPage = React.memo(function DashboardPage({ stats, bots, logs, servers, socket, setLogs }) {
            const [chatFilter, setChatFilter] = useState('all');
            const [chatMsg, setChatMsg] = useState('');
            const [cmdMsg, setCmdMsg] = useState('');
            const [connectIp, setConnectIp] = useState('');
            const logsEndRef = useRef(null);

            useEffect(() => { if (logsEndRef.current) logsEndRef.current.scrollTop = logsEndRef.current.scrollHeight; }, [logs]);

            const sendChat = useCallback(() => {
                if(!chatMsg.trim()||!socket) return;
                socket.emit('chat',{message:chatMsg,serverKey:chatFilter});
                setChatMsg('');
            }, [chatMsg, chatFilter, socket]);

            const sendCmd = useCallback(() => {
                if(!cmdMsg.trim()||!socket) return;
                socket.emit('command',{command:cmdMsg,serverKey:chatFilter});
                setCmdMsg('');
            }, [cmdMsg, chatFilter, socket]);

            const getServerForBot = useCallback((bot) => {
                const key = bot.serverKey || bot.server;
                return (servers || []).find(s => s.key === key);
            }, [servers]);

            return (
                <div>
                    <div className="stats-grid">
                        <div className="stat-card"><div className="stat-label">Bots Ativos</div><div className="stat-value green">{stats.botsAtivos||0}</div></div>
                        <div className="stat-card"><div className="stat-label">Total Conectados</div><div className="stat-value purple">{stats.totalBots||0}</div></div>
                        <div className="stat-card"><div className="stat-label">Servidores</div><div className="stat-value">{(servers||[]).length}</div></div>
                        <div className="stat-card"><div className="stat-label">Blacklist</div><div className="stat-value yellow">{stats.blacklistSize||0}</div></div>
                        <div className="stat-card"><div className="stat-label">Intervalo</div><div className="stat-value">{stats.intervalo||0}s</div></div>
                    </div>
                    <div className="dashboard-grid">
                        <div>
                            <div className="section-header">
                                <span className="section-title">Bots Conectados</span>
                                <div className="section-actions">
                                    <button className="btn-danger" onClick={() => socket&&socket.emit('restartBots')}>Desconectar</button>
                                    <button className="btn-secondary" onClick={() => socket&&socket.emit('refresh')}>üîÑ</button>
                                </div>
                            </div>
                            <div className="bots-list">
                                {(!bots||bots.length===0) ? <div className="bots-empty">Nenhum bot conectado</div> : bots.map((b,i) => {
                                    const srv = getServerForBot(b);
                                    return (
                                        <div key={b.key||i} className="bot-item">
                                            <div className="bot-icon"><I.Bot/></div>
                                            <div className="bot-info">
                                                <div className="bot-name">{b.username||b.name||'?'}</div>
                                                <div className="bot-server">{b.serverKey||b.server||'?'} {b.versao?`(v${b.versao})`:''}</div>
                                                <div className="bot-motd">{srv ? <MotdText motd={srv.motd}/> : ''}</div>
                                            </div>
                                            <div className="bot-status-indicator"/>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                        <div>
                            <div className="dash-section">
                                <h3><I.Chat/> Chat & Comandos</h3>
                                <select className="filter-select" value={chatFilter} onChange={e=>setChatFilter(e.target.value)} style={{width:'100%',marginBottom:10}}>
                                    <option value="all">Todos os Servidores</option>
                                    {bots&&bots.map((b,i)=><option key={b.key||i} value={b.serverKey||b.server}>{b.serverKey||b.server}</option>)}
                                </select>
                                <div className="input-row">
                                    <input className="input-field" placeholder="Mensagem..." value={chatMsg} onChange={e=>setChatMsg(e.target.value)} onKeyDown={e=>e.key==='Enter'&&sendChat()}/>
                                    <button className="btn-primary" onClick={sendChat}>Enviar</button>
                                </div>
                                <div className="input-row">
                                    <input className="input-field" placeholder="/comando" value={cmdMsg} onChange={e=>setCmdMsg(e.target.value)} onKeyDown={e=>e.key==='Enter'&&sendCmd()}/>
                                    <button className="btn-secondary" onClick={sendCmd}>Executar</button>
                                </div>
                                <button className="btn-warn" style={{width:'100%',marginTop:6}} onClick={()=>socket&&socket.emit('announce')}>‚ö° For√ßar An√∫ncio</button>
                            </div>
                            <div className="dash-section">
                                <h3><I.Plug/> Conectar Bot</h3>
                                <div className="input-row">
                                    <input className="input-field" placeholder="IP:Porta" value={connectIp} onChange={e=>setConnectIp(e.target.value)} onKeyDown={e=>{if(e.key==='Enter'&&connectIp&&socket){socket.emit('connect_server',connectIp);setConnectIp('');}}}/>
                                    <button className="btn-primary" onClick={()=>{if(connectIp&&socket){socket.emit('connect_server',connectIp);setConnectIp('');}}}>Conectar</button>
                                </div>
                            </div>
                        </div>
                        <div className="dashboard-full">
                            <div className="dash-section">
                                <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:10}}>
                                    <h3 style={{marginBottom:0}}>üìã Logs ({logs.length})</h3>
                                    <button className="btn-secondary" style={{padding:'5px 12px',fontSize:11}} onClick={()=>setLogs([])}>Limpar</button>
                                </div>
                                <div className="logs-container" ref={logsEndRef}>
                                    {logs.length===0 ? <div style={{color:'#475569',textAlign:'center',padding:20}}>Aguardando logs...</div>
                                    : logs.map((log,i) => <LogEntry key={i} log={log}/>)}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        });

        // ===== SERVERS =====
        const ServersPage = React.memo(function ServersPage({ servers, bots, chatMessages, socket }) {
            const [selectedServer, setSelectedServer] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');

            const botServerKeys = useMemo(() => new Set((bots||[]).map(b => b.serverKey || b.server)), [bots]);

            const filteredServers = useMemo(() => {
                let srvs = servers || [];
                if (searchTerm.trim()) {
                    const s = searchTerm.toLowerCase();
                    srvs = srvs.filter(srv => srv.key.toLowerCase().includes(s) || String(srv.motd||'').toLowerCase().includes(s));
                }
                return srvs;
            }, [servers, searchTerm]);

            const onlineServers = useMemo(() => filteredServers.filter(s => s.status === 'online' || botServerKeys.has(s.key)), [filteredServers, botServerKeys]);
            const offlineServers = useMemo(() => filteredServers.filter(s => s.status !== 'online' && !botServerKeys.has(s.key)), [filteredServers, botServerKeys]);

            const renderCard = useCallback((server) => {
                const isOnline = server.status === 'online' || botServerKeys.has(server.key);
                return (
                    <div key={server.key} className="server-card" onClick={() => setSelectedServer(server)}>
                        <div className="server-card-header">
                            <div className="server-card-info"><h3><MotdText motd={server.motd}/></h3><div className="server-motd">{server.key}</div></div>
                            <span className={`server-status-badge ${isOnline?'online':'offline'}`}>{isOnline?'Online':'Offline'}</span>
                        </div>
                        <div className="server-card-body">
                            <div className="server-detail-row"><span className="detail-icon"><I.Globe/></span><span>{server.key}</span></div>
                            <div className="server-detail-row"><span className="detail-icon"><I.Users/></span><span>Jogadores: {(server.players||[]).length}/{server.maxPlayers||'?'}</span></div>
                            <div className="server-detail-row"><span className="detail-icon"><I.Gamepad/></span><span>Vers√£o: {server.version||'?'}</span></div>
                        </div>
                        <div className="server-card-footer">
                            <button className="server-card-action" onClick={e=>{e.stopPropagation();setSelectedServer(server);}}><I.Eye/> Detalhes</button>
                            <button className="server-card-action" onClick={e=>{e.stopPropagation();socket&&socket.emit('connect_server',server.key);}}><I.Plug/> Conectar</button>
                        </div>
                    </div>
                );
            }, [botServerKeys, socket]);

            return (
                <div>
                    <div className="section-header">
                        <span className="section-title">Servidores ({(servers||[]).length})</span>
                        <div className="section-actions">
                            <input className="chat-search" style={{minWidth:150}} placeholder="Buscar servidor..." value={searchTerm} onChange={e=>setSearchTerm(e.target.value)}/>
                            <button className="btn-secondary" onClick={()=>socket&&socket.emit('refresh')}>üîÑ Atualizar</button>
                        </div>
                    </div>
                    {filteredServers.length === 0 ? (
                        <div className="no-data-placeholder"><I.Server/><p>Nenhum servidor {searchTerm?'encontrado':'detectado'}.</p><span>{searchTerm?'Tente outro termo':'Aguardando detec√ß√£o LAN...'}</span></div>
                    ) : (
                        <>
                            {onlineServers.length > 0 && <><div className="server-section-label"><span className="dot" style={{background:'#22c55e'}}/> Online ({onlineServers.length})</div><div className="servers-grid">{onlineServers.map(renderCard)}</div></>}
                            {offlineServers.length > 0 && <><div className="server-section-label"><span className="dot" style={{background:'#ef4444'}}/> Offline ({offlineServers.length})</div><div className="servers-grid">{offlineServers.map(renderCard)}</div></>}
                        </>
                    )}
                    {selectedServer && <ServerPopup server={selectedServer} onClose={()=>setSelectedServer(null)} chatMessages={chatMessages} socket={socket}/>}
                </div>
            );
        });

        // ===== CHAT =====
        const ChatPage = React.memo(function ChatPage({ chatMessages, socket }) {
            const [search, setSearch] = useState('');
            const [serverFilter, setServerFilter] = useState('all');
            const chatEndRef = useRef(null);
            const [autoScroll, setAutoScroll] = useState(true);

            const filtered = useMemo(() => {
                let msgs = chatMessages || [];
                if (serverFilter !== 'all') msgs = msgs.filter(m => m.serverKey === serverFilter);
                if (search.trim()) {
                    const s = search.toLowerCase();
                    msgs = msgs.filter(m =>
                        (m.username||'').toLowerCase().includes(s) ||
                        (m.message||'').toLowerCase().includes(s) ||
                        (m.serverKey||'').toLowerCase().includes(s)
                    );
                }
                return msgs.slice(-300);
            }, [chatMessages, search, serverFilter]);

            const uniqueServers = useMemo(() => [...new Set((chatMessages||[]).map(m=>m.serverKey))], [chatMessages]);

            useEffect(() => {
                if(chatEndRef.current && autoScroll) chatEndRef.current.scrollTop = chatEndRef.current.scrollHeight;
            }, [filtered, autoScroll]);

            const handleScroll = useCallback((e) => {
                const el = e.target;
                const atBottom = el.scrollHeight - el.scrollTop - el.clientHeight < 50;
                setAutoScroll(atBottom);
            }, []);

            const exportCSV = useCallback(() => {
                const header = 'Hora,Usu√°rio,Mensagem,Servidor\n';
                const rows = filtered.map(m=>`"${new Date(m.timestamp).toLocaleString('pt-BR')}","${m.username}","${(m.message||'').replace(/"/g,'""')}","${m.serverKey}"`).join('\n');
                const blob = new Blob([header+rows],{type:'text/csv;charset=utf-8'});
                const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `chat_${Date.now()}.csv`; a.click();
            }, [filtered]);

            const highlightText = useCallback((text, q) => {
                if (!q.trim() || !text) return text;
                try {
                    const re = new RegExp(`(${q.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')})`,'gi');
                    return String(text).split(re).map((p,i) => re.test(p) ? <span key={i} className="highlight">{p}</span> : p);
                } catch { return text; }
            }, []);

            return (
                <div className="chat-container" style={{height:'calc(100vh - 104px)'}}>
                    <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:16}}>
                        <span className="section-title">Chat ({filtered.length})</span>
                        <div className="section-actions">
                            {!autoScroll && <button className="btn-secondary" style={{fontSize:11,padding:'6px 12px'}} onClick={()=>setAutoScroll(true)}>‚Üì Auto-scroll</button>}
                            <button className="btn-danger" style={{fontSize:11,padding:'6px 12px'}} onClick={()=>socket&&socket.emit('clearChatDatabase')}>Limpar DB</button>
                        </div>
                    </div>
                    <div className="chat-toolbar">
                        <input className="chat-search" placeholder="Buscar..." value={search} onChange={e=>setSearch(e.target.value)}/>
                        <select className="filter-select" value={serverFilter} onChange={e=>setServerFilter(e.target.value)}>
                            <option value="all">Todos</option>
                            {uniqueServers.map(k=><option key={k} value={k}>{k}</option>)}
                        </select>
                        <button className="export-btn" onClick={exportCSV}><I.Download/> CSV</button>
                    </div>
                    <div className="chat-messages" ref={chatEndRef} onScroll={handleScroll}>
                        {filtered.length===0 ? <div className="chat-empty"><I.MsgEmpty/><p>Sem mensagens{search?' para esta busca':''}</p></div>
                        : filtered.map((msg,i) => (
                            <div key={msg.id||`${msg.timestamp}-${i}`} className="chat-msg-item">
                                <div className="chat-msg-avatar">
                                    <img src={`https://mc-heads.net/avatar/${encodeURIComponent(msg.username||'Steve')}/32`}
                                         alt="" onError={e=>{e.target.style.display='none'; e.target.parentNode.textContent=(msg.username||'??').substring(0,2).toUpperCase();}}/>
                                </div>
                                <div className="chat-msg-content">
                                    <div className="chat-msg-header">
                                        <span className="chat-msg-user">{highlightText(msg.username||'?',search)}</span>
                                        <span className="chat-msg-server-tag">{msg.serverKey}</span>
                                        <span className="chat-msg-time">{new Date(msg.timestamp).toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit',second:'2-digit'})}</span>
                                    </div>
                                    <div className="chat-msg-text">{highlightText(msg.message||'',search)}</div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        });

        // ===== ANALYTICS =====
        const AnalyticsPage = React.memo(function AnalyticsPage({ chatMessages, servers, bots, analytics, socket }) {
            const playersChartRef = useRef(null);
            const msgsChartRef = useRef(null);
            const playersChartInstance = useRef(null);
            const msgsChartInstance = useRef(null);
            const [timeRange, setTimeRange] = useState('24h');

            useEffect(() => { if(socket) socket.emit('getAnalytics', timeRange); }, [timeRange, socket]);

            const totalPlayers = useMemo(() => {
                let t=0; (servers||[]).forEach(s => { if(s.players) t+=s.players.length; }); return t;
            }, [servers]);
            const totalMsgs = (chatMessages||[]).length;
            const onlineCount = (servers||[]).filter(s => s.status === 'online').length;
            const topServers = (analytics && analytics.topServers) || [];

            useEffect(() => {
                const canvas = playersChartRef.current;
                if (!canvas) return;
                if (playersChartInstance.current) { playersChartInstance.current.destroy(); playersChartInstance.current = null; }
                const data = (analytics && analytics.playersOverTime) || [];
                if (data.length === 0) return;
                playersChartInstance.current = new Chart(canvas, {
                    type: 'line',
                    data: {
                        labels: data.map(d => new Date(d.timestamp).toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'})),
                        datasets: [{ label: 'Jogadores', data: data.map(d => d.total), borderColor: '#6366f1', backgroundColor: 'rgba(99,102,241,0.1)', fill: true, tension: 0.4, pointRadius: 0 }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { ticks: { color: '#475569', maxTicksLimit: 10 }, grid: { color: 'rgba(255,255,255,0.04)' } }, y: { ticks: { color: '#475569' }, grid: { color: 'rgba(255,255,255,0.04)' }, beginAtZero: true } } }
                });
                return () => { if(playersChartInstance.current) { playersChartInstance.current.destroy(); playersChartInstance.current = null; } };
            }, [analytics]);

            useEffect(() => {
                const canvas = msgsChartRef.current;
                if (!canvas) return;
                if (msgsChartInstance.current) { msgsChartInstance.current.destroy(); msgsChartInstance.current = null; }
                const data = (analytics && analytics.messagesPerHour) || [];
                if (data.length === 0) return;
                const sorted = [...data].sort((a,b) => a.hour - b.hour);
                msgsChartInstance.current = new Chart(canvas, {
                    type: 'bar',
                    data: {
                        labels: sorted.map(d => `${String(d.hour).padStart(2,'0')}:00`),
                        datasets: [{ label: 'Mensagens', data: sorted.map(d => d.count), backgroundColor: 'rgba(99,102,241,0.5)', borderColor: '#6366f1', borderWidth: 1, borderRadius: 4 }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { ticks: { color: '#475569' }, grid: { color: 'rgba(255,255,255,0.04)' } }, y: { ticks: { color: '#475569' }, grid: { color: 'rgba(255,255,255,0.04)' }, beginAtZero: true } } }
                });
                return () => { if(msgsChartInstance.current) { msgsChartInstance.current.destroy(); msgsChartInstance.current = null; } };
            }, [analytics]);

            return (
                <div>
                    <div className="section-header">
                        <span className="section-title">Analytics</span>
                        <div className="section-actions">
                            {['1h','24h','7d'].map(r => <button key={r} className={r===timeRange?'btn-primary':'btn-secondary'} style={{padding:'6px 14px',fontSize:12}} onClick={()=>setTimeRange(r)}>{r}</button>)}
                        </div>
                    </div>
                    <div className="analytics-stat-grid">
                        <div className="analytics-stat"><div className="val">{totalPlayers}</div><div className="lbl">Jogadores Agora</div></div>
                        <div className="analytics-stat"><div className="val">{onlineCount}</div><div className="lbl">Servidores Online</div></div>
                        <div className="analytics-stat"><div className="val">{(bots||[]).length}</div><div className="lbl">Bots Ativos</div></div>
                        <div className="analytics-stat"><div className="val">{totalMsgs}</div><div className="lbl">Total Mensagens</div></div>
                    </div>
                    <div className="analytics-grid">
                        <div className="chart-card"><h3>Jogadores ao Longo do Tempo</h3><div style={{height:250}}><canvas ref={playersChartRef}/></div></div>
                        <div className="chart-card"><h3>Mensagens por Hora</h3><div style={{height:250}}><canvas ref={msgsChartRef}/></div></div>
                        <div className="chart-card"><h3>Top Servidores</h3>
                            {topServers.length===0 ? <div style={{color:'#475569',textAlign:'center',padding:20,fontSize:13}}>Sem dados</div>
                            : topServers.map((s,i) => <div key={i} className="top-server-row"><span style={{color:'#475569',marginRight:8,fontSize:11}}>#{i+1}</span><span className="top-server-name">{s.serverKey}</span><span className="top-server-val">{s.messages} msgs</span><span style={{color:'#64748b',fontSize:11,marginLeft:8}}>{s.uniquePlayers} players</span></div>)}
                        </div>
                        <div className="chart-card"><h3>Status</h3>
                            <div style={{display:'flex',gap:20,justifyContent:'center',padding:20}}>
                                <div style={{textAlign:'center'}}><div style={{fontSize:36,fontWeight:800,color:'#22c55e'}}>{onlineCount}</div><div style={{fontSize:12,color:'#64748b'}}>Online</div></div>
                                <div style={{textAlign:'center'}}><div style={{fontSize:36,fontWeight:800,color:'#ef4444'}}>{(servers||[]).length - onlineCount}</div><div style={{fontSize:12,color:'#64748b'}}>Offline</div></div>
                                <div style={{textAlign:'center'}}><div style={{fontSize:36,fontWeight:800,color:'#818cf8'}}>{(servers||[]).length}</div><div style={{fontSize:12,color:'#64748b'}}>Total</div></div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        });

        // ===== SETTINGS =====
        function SettingsPage({ stats, socket }) {
            const [username, setUsername] = useState(stats.username || 'Anunciador');
            const [intervalo, setIntervalo] = useState(stats.intervalo || 180);
            const [newBl, setNewBl] = useState('');
            const [newMsg, setNewMsg] = useState('');
            useEffect(() => { setUsername(stats.username||'Anunciador'); setIntervalo(stats.intervalo||180); }, [stats]);
            const bl = stats.blacklistItems || [];
            const msgs = stats.mensagens || [];
            return (
                <div>
                    <div className="section-header"><span className="section-title">Configura√ß√µes</span></div>
                    <div className="settings-grid">
                        <div className="setting-group">
                            <h3><I.Settings/> Geral</h3>
                            <div className="setting-row"><label>Username do Bot</label><div className="input-row"><input className="input-field" value={username} onChange={e=>setUsername(e.target.value)}/><button className="btn-primary" onClick={()=>socket&&socket.emit('setUsername',username)}>Salvar</button></div></div>
                            <div className="setting-row"><label>Intervalo de An√∫ncio (segundos)</label><div className="input-row"><input className="input-field" type="number" min="10" value={intervalo} onChange={e=>setIntervalo(Number(e.target.value))}/><button className="btn-primary" onClick={()=>socket&&socket.emit('setIntervalo',intervalo)}>Salvar</button></div></div>
                        </div>
                        <div className="setting-group">
                            <h3><I.Shield/> Blacklist ({bl.length})</h3>
                            <div className="input-row"><input className="input-field" placeholder="IP:Porta" value={newBl} onChange={e=>setNewBl(e.target.value)} onKeyDown={e=>{if(e.key==='Enter'&&newBl.trim()&&socket){socket.emit('addBlacklist',newBl.trim());setNewBl('');}}}/><button className="btn-primary" onClick={()=>{if(newBl.trim()&&socket){socket.emit('addBlacklist',newBl.trim());setNewBl('');}}}>+</button></div>
                            <div className="blacklist-items">
                                {bl.map((item,i) => <span key={i} className="blacklist-tag">{item}<button onClick={()=>socket&&socket.emit('removeBlacklist',item)}>√ó</button></span>)}
                                {bl.length===0 && <span style={{fontSize:12,color:'#475569'}}>Vazio</span>}
                            </div>
                            {bl.length>0 && <button className="btn-danger" style={{marginTop:10,padding:'6px 14px',fontSize:12}} onClick={()=>socket&&socket.emit('clearBlacklist')}>Limpar Tudo</button>}
                        </div>
                        <div className="setting-group" style={{gridColumn:'1/-1'}}>
                            <h3><I.Chat/> Mensagens de An√∫ncio ({msgs.length})</h3>
                            <div className="input-row"><input className="input-field" placeholder="Nova mensagem de an√∫ncio..." value={newMsg} onChange={e=>setNewMsg(e.target.value)} onKeyDown={e=>{if(e.key==='Enter'&&newMsg.trim()&&socket){socket.emit('addMsg',newMsg.trim());setNewMsg('');}}}/><button className="btn-primary" onClick={()=>{if(newMsg.trim()&&socket){socket.emit('addMsg',newMsg.trim());setNewMsg('');}}}>Adicionar</button></div>
                            <div className="messages-list">
                                {msgs.map((m,i) => <div key={i} className="message-item"><span style={{flex:1,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'}}>{m}</span><button onClick={()=>socket&&socket.emit('delMsg',i)}>√ó</button></div>)}
                                {msgs.length===0 && <span style={{fontSize:12,color:'#475569',padding:8}}>Nenhuma mensagem configurada</span>}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // ===== MAIN APP =====
        function App() {
            const [page, setPage] = useState('dashboard');
            const [collapsed, setCollapsed] = useState(false);
            const [relayUrl, setRelayUrl] = useState('https://anunciador-relay.onrender.com');
            const [connected, setConnected] = useState(false);
            const [botOnline, setBotOnline] = useState(false);
            const [socket, setSocket] = useState(null);
            const [stats, setStats] = useState({botsAtivos:0,totalBots:0,blacklistSize:0,blacklistItems:[],mensagens:[],intervalo:180,username:'Anunciador'});
            const [bots, setBots] = useState([]);
            const [logs, setLogs] = useState([]);
            const [chatMessages, setChatMessages] = useState([]);
            const [servers, setServers] = useState([]);
            const [analytics, setAnalytics] = useState({playersOverTime:[],messagesPerHour:[],topServers:[]});
            const [toasts, setToasts] = useState([]);
            const [authenticated, setAuthenticated] = useState(false);
            const [needsAuth, setNeedsAuth] = useState(false);
            const [loginPassword, setLoginPassword] = useState('');
            const [loginError, setLoginError] = useState('');
            const [loginLoading, setLoginLoading] = useState(false);

            const socketRef = useRef(null);

            const addToast = useCallback((msg) => {
                const id = Date.now() + Math.random();
                setToasts(p => [...p.slice(-4), {id, text: msg}]);
                setTimeout(() => setToasts(p => p.filter(t => t.id !== id)), 4000);
            }, []);

            const handleLogin = useCallback(() => {
                if (!socketRef.current || !loginPassword.trim()) return;
                setLoginLoading(true); setLoginError('');
                socketRef.current.emit('authenticate', loginPassword, (response) => {
                    setLoginLoading(false);
                    if (response && response.success) {
                        setAuthenticated(true); setNeedsAuth(false);
                        addToast('‚úÖ Login realizado!');
                    } else {
                        setLoginError('‚ùå Senha incorreta!');
                    }
                });
            }, [loginPassword, addToast]);

            const connectRelay = useCallback((url) => {
                const targetUrl = url || relayUrl;
                if (socketRef.current) { socketRef.current.removeAllListeners(); socketRef.current.disconnect(); }

                const s = io(targetUrl, { transports: ['websocket','polling'], reconnection: true, reconnectionDelay: 3000, reconnectionDelayMax: 15000, timeout: 15000 });
                socketRef.current = s;
                setSocket(s);

                s.on('connect', () => { setConnected(true); addToast('‚úÖ Conectado ao relay!'); });
                s.on('disconnect', () => { setConnected(false); });
                s.on('connect_error', () => setConnected(false));
                s.on('requireAuth', () => { setNeedsAuth(true); setAuthenticated(false); });

                s.on('init', (d) => {
                    if(d.stats) setStats(d.stats);
                    if(d.bots) setBots(d.bots);
                    if(d.logs) setLogs(d.logs);
                    if(d.chatDatabase) setChatMessages(prev => {
                        const existingTs = new Set(prev.map(m => m.timestamp));
                        const newMsgs = d.chatDatabase.filter(m => !existingTs.has(m.timestamp));
                        const combined = [...prev, ...newMsgs];
                        return combined.slice(-2000);
                    });
                    if(d.servers) setServers(d.servers);
                    if(d.analytics) setAnalytics(d.analytics);
                    setAuthenticated(true); setNeedsAuth(false);
                });

                s.on('botStatus', (v) => setBotOnline(v));
                s.on('statsUpdate', (d) => setStats(d));
                s.on('botsUpdate', (d) => setBots(d||[]));
                s.on('log', (e) => setLogs(p => [...p.slice(-199), e]));
                s.on('chatMessage', (m) => setChatMessages(p => [...p.slice(-1999), m]));
                s.on('serverUpdate', (d) => setServers(d||[]));
                s.on('toast', (m) => addToast(m));
                s.on('chatMessages', (m) => setChatMessages(m));
                s.on('analyticsData', (d) => setAnalytics(d));
            }, [relayUrl, addToast]);

            const disconnectRelay = useCallback(() => {
                if(socketRef.current) { socketRef.current.removeAllListeners(); socketRef.current.disconnect(); socketRef.current = null; }
                setSocket(null); setConnected(false); setBotOnline(false);
                setAuthenticated(false); setNeedsAuth(false);
            }, []);

            useEffect(() => {
                connectRelay();
                return () => {
                    if(socketRef.current) { socketRef.current.removeAllListeners(); socketRef.current.disconnect(); }
                };
            }, []);

            const titles = {dashboard:'Dashboard',servers:'Servidores',chat:'Chat',analytics:'Analytics',settings:'Configura√ß√µes'};
            const navItems = [
                {id:'dashboard',label:'Dashboard',icon:I.Dashboard},
                {id:'servers',label:'Servidores',icon:I.Server,badge:(servers||[]).length},
                {id:'chat',label:'Chat',icon:I.Chat,badge:(chatMessages||[]).length},
                {id:'analytics',label:'Analytics',icon:I.Analytics},
                {id:'settings',label:'Configura√ß√µes',icon:I.Settings},
            ];

            // ===== LOGIN SCREEN =====
            if (needsAuth && !authenticated) {
                return (
                    <><div className="toast-container">{toasts.map(t=><div key={t.id} className="toast">{t.text}</div>)}</div>
                    <div className="login-bg">
                        <div className="login-card">
                            <div className="login-card-header">
                                <div className="sidebar-logo" style={{width:60,height:60,fontSize:20,margin:'0 auto 12px',borderRadius:14}}>CRV</div>
                                <div style={{fontSize:16,fontWeight:700,color:'#f1f5f9'}}>Central Radmin VPN</div>
                                <div style={{fontSize:12,color:'#64748b',marginTop:4}}>Painel de Controle v6.0</div>
                            </div>
                            <div className="login-card-body">
                                <div style={{marginBottom:12}}>
                                    <label style={{fontSize:12,color:'#64748b',fontWeight:500,display:'block',marginBottom:6}}>Senha do Painel</label>
                                    <input className="input-field" type="password" placeholder="Digite a senha..." value={loginPassword}
                                        onChange={e => {setLoginPassword(e.target.value);setLoginError('');}}
                                        onKeyDown={e => e.key === 'Enter' && handleLogin()}
                                        style={{width:'100%',padding:'12px 16px',fontSize:14}} autoFocus/>
                                </div>
                                {loginError && <div className="login-error">{loginError}</div>}
                                <button className="btn-primary" onClick={handleLogin} disabled={loginLoading || !loginPassword.trim()}
                                    style={{width:'100%',padding:'12px',fontSize:14}}>
                                    {loginLoading ? '‚è≥ Verificando...' : 'üîì Entrar'}
                                </button>
                                <div className="login-footer">
                                    <div className={`status-dot ${connected?'online':'offline'}`} style={{width:6,height:6}}/>
                                    {connected ? 'Conectado ao relay' : 'Desconectado'}
                                </div>
                            </div>
                        </div>
                    </div></>
                );
            }

            // ===== MAIN APP =====
            return (
                <><div className="toast-container">{toasts.map(t=><div key={t.id} className="toast">{t.text}</div>)}</div>
                <div className={`sidebar ${collapsed?'collapsed':''}`}>
                    <div className="sidebar-header"><div className="sidebar-logo">CRV</div><div className="sidebar-brand"><span className="sidebar-brand-name">Central Radmin VPN</span><span className="sidebar-brand-sub">Painel v6.0</span></div></div>
                    <div className="sidebar-nav"><div className="nav-section"><div className="nav-label">Menu</div>
                        {navItems.map(item => (
                            <div key={item.id} className={`nav-item ${page===item.id?'active':''}`} onClick={()=>setPage(item.id)}>
                                <span className="nav-icon"><item.icon/></span><span className="nav-item-text">{item.label}</span>
                                {item.badge!==undefined && item.badge>0 && !collapsed && <span className="nav-badge">{item.badge>999?'999+':item.badge}</span>}
                            </div>
                        ))}
                    </div></div>
                    <div className="connection-section">
                        <div className="connection-status"><div className={`status-dot ${connected?'online':'offline'}`}/><span className="status-text">Relay: <strong>{connected?'Online':'Offline'}</strong></span></div>
                        <div className="connection-status"><div className={`status-dot ${botOnline?'online':'offline'}`}/><span className="status-text">Bot: <strong>{botOnline?'Online':'Offline'}</strong></span></div>
                        <div className="relay-input-group"><input className="relay-input" value={relayUrl} onChange={e=>setRelayUrl(e.target.value)} placeholder="URL do Relay"/><button className="relay-btn" onClick={connected?disconnectRelay:()=>connectRelay()}>{connected?'Sair':'Conectar'}</button></div>
                    </div>
                    <div className="sidebar-footer"><button className="sidebar-toggle" onClick={()=>setCollapsed(!collapsed)}>{collapsed?<I.ChevronRight/>:<I.ChevronLeft/>}<span className="sidebar-footer-text">Recolher</span></button></div>
                </div>
                <div className="main-content">
                    <div className="topbar">
                        <span className="topbar-title">{titles[page]}</span>
                        <div className="topbar-right">
                            <div className="topbar-status"><div className={`status-dot ${botOnline?'online':'offline'}`}/>{botOnline?`Bot (${stats.botsAtivos||0})`:'Bot Off'}</div>
                            <div className="topbar-status"><div className={`status-dot ${connected?'online':'offline'}`}/>{connected?'Relay ‚úì':'Relay ‚úó'}</div>
                        </div>
                    </div>
                    <div className="page-content">
                        {page==='dashboard' && <DashboardPage stats={stats} bots={bots} logs={logs} servers={servers} socket={socket} setLogs={setLogs}/>}
                        {page==='servers' && <ServersPage servers={servers} bots={bots} chatMessages={chatMessages} socket={socket}/>}
                        {page==='chat' && <ChatPage chatMessages={chatMessages} socket={socket}/>}
                        {page==='analytics' && <AnalyticsPage chatMessages={chatMessages} servers={servers} bots={bots} analytics={analytics} socket={socket}/>}
                        {page==='settings' && <SettingsPage stats={stats} socket={socket}/>}
                    </div>
                </div></>
            );
        }

        ReactDOM.render(<App/>, document.getElementById('app'));
    </script>
</body>
</html>